<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>WebGazer with WebSocket</title>
    <script src="webgazer_new/dist/webgazer.js"></script>
</head>
<body>
    <h4>
        If you're ever not sure where to go or what to do, please check either this document or our day-of website for information first! Additionally, you can ask any of our team members for help (we'll be the ones in the pink sweatshirts), and we'll have our help desk set up in Johnson Ice Rink throughout the hacking period.
    </h4>
    <script>
        // Establish a WebSocket connection to the Python server
        const socket = new WebSocket('ws://localhost:6789');

        socket.onopen = function() {
            console.log('WebSocket connection opened');
        };

        socket.onmessage = function(event) {
            console.log('Server response:', event.data);
        };

        window.onload = function() {
            webgazer.setRegression('ridge')
                .setGazeListener(function(data, clock) {
                    if (data) {
                        const gazeData = JSON.stringify({ x: data.x, y: data.y });
                        console.log('Sending gaze data:', gazeData);
                        socket.send(gazeData);  // Send gaze data to Python server
                    }
                }).begin();
        };
    </script>
</body>
</html>
